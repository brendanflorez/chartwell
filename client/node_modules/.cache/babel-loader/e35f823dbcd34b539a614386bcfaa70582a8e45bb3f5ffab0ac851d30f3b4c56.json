{"ast":null,"code":"var _jsxFileName = \"/home/runner/Chartwell-v2/client/src/components/CausalMaps.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CausalMaps = () => {\n  _s();\n  const [inputValue, setInputValue] = useState('');\n  const [causalMaps, setCausalMaps] = useState([]);\n  console.log('CausalMaps component rendered');\n  const formatResponse = responseText => {\n    return responseText.replace(/\\n/g, '<br/>').replace(/\\\\/g, '');\n  };\n  const handleSubmit = async event => {\n    event.preventDefault();\n    console.log('handleSubmit called');\n    try {\n      //const response = await axios.post('/api/generate-causal-map', { input: inputValue });\n      const response = await axios.post('/generate-typeql', {\n        userInput: inputValue\n      });\n      console.log('API response:', response);\n      if (response.data && response.data.typeQLCode) {\n        const rawTypeQLCode = response.data.typeQLCode;\n        const formattedTypeQLCode = formatResponse(response.data.typeQLCode);\n        setCausalMaps([...causalMaps, formattedTypeQLCode]);\n\n        // Call the executeTypeQL function to insert the data into the TypeDB database\n        const executionResult = await executeInsertTypeQL(formattedTypeQLCode);\n        console.log('TypeDB execution result:', executionResult);\n      } else {\n        console.error('Unexpected API response:', response);\n      }\n    } catch (error) {\n      console.error('Error during API call:', error);\n    }\n    setInputValue('');\n  };\n  const executeInsertTypeQL = async typeQLCode => {\n    try {\n      const response = await axios.post('/execute-insert-typeql', {\n        typeQLCode\n      });\n      console.log('TypeQL execution response:', response);\n      return response.data;\n    } catch (error) {\n      console.error('Error during TypeQL execution:', error);\n      throw error;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"causal-input\",\n        children: \"Please enter causal map input:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"causal-input\",\n        type: \"text\",\n        value: inputValue,\n        onChange: event => setInputValue(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        onClick: () => console.log('Button clicked'),\n        children: \"Generate Causal Map\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: causalMaps.map((map, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\"Causal Map \", index + 1]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          dangerouslySetInnerHTML: {\n            __html: map\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 3\n  }, this);\n};\n_s(CausalMaps, \"PMeg/5v8GZ5Z3fwPfwX+Ip+B0dw=\");\n_c = CausalMaps;\nexport default CausalMaps;\nvar _c;\n$RefreshReg$(_c, \"CausalMaps\");","map":{"version":3,"names":["React","useState","axios","jsxDEV","_jsxDEV","CausalMaps","_s","inputValue","setInputValue","causalMaps","setCausalMaps","console","log","formatResponse","responseText","replace","handleSubmit","event","preventDefault","response","post","userInput","data","typeQLCode","rawTypeQLCode","formattedTypeQLCode","executionResult","executeInsertTypeQL","error","children","onSubmit","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","id","type","value","onChange","target","onClick","map","index","dangerouslySetInnerHTML","__html","_c","$RefreshReg$"],"sources":["/home/runner/Chartwell-v2/client/src/components/CausalMaps.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\n\nconst CausalMaps = () => {\n  const [inputValue, setInputValue] = useState('');\n  const [causalMaps, setCausalMaps] = useState([]);\n  console.log('CausalMaps component rendered');\n\n  const formatResponse = (responseText) => {\n    return responseText.replace(/\\n/g, '<br/>').replace(/\\\\/g, '');\n  };\n  \n  \n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    console.log('handleSubmit called');\n\n    try {\n      //const response = await axios.post('/api/generate-causal-map', { input: inputValue });\n      const response = await axios.post('/generate-typeql', { userInput: inputValue });\n      console.log('API response:', response);\n\n      if (response.data && response.data.typeQLCode) {\n        const rawTypeQLCode = response.data.typeQLCode;\n        const formattedTypeQLCode = formatResponse(response.data.typeQLCode);\n        setCausalMaps([...causalMaps, formattedTypeQLCode]);\n      \n        // Call the executeTypeQL function to insert the data into the TypeDB database\n        const executionResult = await executeInsertTypeQL(formattedTypeQLCode);\n        console.log('TypeDB execution result:', executionResult);\n      } else {\n        console.error('Unexpected API response:', response);\n        }\n\n    } catch (error) {\n      console.error('Error during API call:', error);\n    }\n\n    setInputValue('');\n  };\n\n  const executeInsertTypeQL = async (typeQLCode) => {\n  try {\n    const response = await axios.post('/execute-insert-typeql', { typeQLCode });\n    console.log('TypeQL execution response:', response);\n    return response.data;\n  } catch (error) {\n    console.error('Error during TypeQL execution:', error);\n    throw error;\n  }\n};\n\n\n  return (\n  <div>\n    <form onSubmit={handleSubmit}>\n      <label htmlFor=\"causal-input\">Please enter causal map input:</label>\n      <input\n        id=\"causal-input\"\n        type=\"text\"\n        value={inputValue}\n        onChange={(event) => setInputValue(event.target.value)}\n      />\n      <button type=\"submit\" onClick={() => console.log('Button clicked')}>Generate Causal Map</button>\n    </form>\n    <div>\n      {causalMaps.map((map, index) => (\n        <div key={index}>\n          <h2>Causal Map {index + 1}</h2>\n          \n          <p dangerouslySetInnerHTML={{ __html: map }}></p>\n        </div>\n      ))}\n    </div>\n  </div>\n);\n};\n\nexport default CausalMaps;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}